/*
 *  jsTmpl v2.0.1
 *
 *  Copyright 2017, Frank Chao
 *  Released under the MIT license
 *
 *  Released on: June 12, 2017
 */
!function(l,f){"function"===typeof define&&define.amd?define(f):"object"===typeof module&&"object"===typeof module.exports?module.exports=f():l.jsTmpl=f()}(this,function(){function l(a,c){return e.toArray(c?c.querySelectorAll(a):n.querySelectorAll(a))}function f(a,c){return e.toArray(c?c.getElementsByTagName(a):n.getElementsByTagName(a))}if(!Array.isArray)throw Error("jsTmpl's Javascript does not support of ie8- !!!");var n=document,e={isStr:function(a){return"string"===typeof a},isPlainObj:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return!!Array.isArray(a)},toArray:function(a){return Array.prototype.slice.call(a)},format:function(a){return a=a.replace(/(\{\{)\s+/g,"{{").replace(/\s+(\}\})/g,"}}")},reg:function(a){return new RegExp("\\{\\{"+a+"\\}\\}","g")}},r=window.jsTmpl={template:function(a,c){a&&c&&e.isStr(a)&&e.isPlainObj(c)&&(a=l(a),a.forEach(function(a){var d=a.getAttribute("js-data"),b=c[d];if(""!=d){a.innerHTML=e.format(a.innerHTML);f("*",a).forEach(function(a){a.getAttribute("js-each")&&(a.className+="jstmpl-template-each",a.innerHTML=a.innerHTML.replace(/\{\{/g,"{|{|").replace(/\}\}/g,"|}|}"))});var d=a.innerHTML,g;for(g in b)if(e.isStr(b[g]))var h=e.reg(g),d=d.replace(h,b[g]);a.innerHTML=d;a.innerHTML=a.innerHTML.replace(/\{\|\{\|/g,"{{").replace(/\|\}\|\}/g,"}}");l(".jstmpl-template-each",a).forEach(function(a){var d=a.innerHTML;a.innerHTML="\x3c!--  --\x3e";var c=d,h="",g=a.getAttribute("js-each"),k;for(k in b)k==g&&e.isArray(b[k])&&b[k].forEach(function(a){for(var b in a){var k=e.reg(b);c=c.replace(k,a[b])}h+=c;c=d});a.innerHTML=h;a.className=a.className.replace("jstmpl-template-each","")})}}))},component:function(a,c){a&&c&&e.isStr(a)&&e.isPlainObj(c)&&f("js-tmpl").forEach(function(b){b.innerHTML="";b.style.cssText="display:none !important";var d=c.template,e=c.data,g=c.event,h=b.getAttribute("type"),f=b.getAttribute("name"),t=b.getAttribute("data");if("component"==h&&f==a){var h="jstmpl-component-"+Date.now()+"-"+parseInt(1E17*Math.random()),m=d.substring(0,d.indexOf("\x3e")).toLowerCase().replace(/\s+(\=)/g,"\x3d").replace(/\s+(\')/g,"'").replace(/\s+(\")/g,'"'),p="",f="";0<m.indexOf("id")?(p=m.substring(m.indexOf("id")+4).replace(/(\'|\")(.*)/,""),""==p&&(d=d.replace(/id\=(\'\'|\"\")/,' id\x3d"'+h+'"'))):d=d.replace(m,m+' id\x3d"'+h+'"');f=""!=p?p:h;d=d.replace("\x3e",' js-data\x3d"'+t+'"\x3e');b.insertAdjacentHTML("afterend",d);var d={},q;for(q in e)d[q]=e[q];r.template("#"+f,d);n.getElementById(h)&&n.getElementById(h).removeAttribute("id");b=b.nextElementSibling;b.removeAttribute("js-data");e=[b];Array.prototype.push.apply(e,l("[js-event]",b));e.forEach(function(a){var b=a.getAttribute("js-event");g&&g[b]&&g[b].apply(a)})}})},replace:function(a,c){a&&c&&e.isStr(a)&&e.isPlainObj(c)&&f("js-tmpl").forEach(function(b){b.innerHTML="";b.style.cssText="display:none !important";if("replace"==b.getAttribute("type")&&a==b.getAttribute("name")){var d=b.outerHTML.split(/(=|\s+)/).filter(function(a){return a&&!a.match(/(\<|\>|\=|\s+|\"|\')/)}),f=e.format(c.template),g="";d.forEach(function(a){a.match(/(name|type|style|none)/)||(f=g=f.replace(e.reg(a),b.getAttribute(a)))});b.outerHTML=g}})}};return r});
