/*
 *  jsTmpl v2.0.0
 *
 *  Copyright 2017, Frank Chao
 *  Released under the MIT license
 *
 *  Released on: June 08, 2017
 */
!function(k,e){"function"===typeof define&&define.amd?define(e):"object"===typeof module&&"object"===typeof module.exports?module.exports=e():k.jsTmpl=e()}(this,function(){function k(a,c){return f.toArray(c?c.querySelectorAll(a):m.querySelectorAll(a))}function e(a,c){return f.toArray(c?c.getElementsByTagName(a):m.getElementsByTagName(a))}if(!Array.isArray)throw Error("jsTmpl's Javascript does not support of ie8- !!!");var m=document,f={isStr:function(a){return"string"===typeof a},isPlainObj:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return!!Array.isArray(a)},toArray:function(a){return Array.prototype.slice.call(a)},format:function(a){return a=a.replace(/(\{\{)\s+/g,"{{").replace(/\s+(\}\})/g,"}}")},reg:function(a){return new RegExp("\\{\\{"+a+"\\}\\}","g")}},q=window.jsTmpl={template:function(a,c){a&&c&&f.isStr(a)&&f.isPlainObj(c)&&(a=k(a),a.forEach(function(a){var d=a.getAttribute("js-data"),b=c[d];if(""!=d){a.innerHTML=f.format(a.innerHTML);e("*",a).forEach(function(a){a.getAttribute("js-each")&&(a.className+="jstmpl-template-each",a.innerHTML=a.innerHTML.replace(/\{\{/g,"{|{|").replace(/\}\}/g,"|}|}"))});var d=a.innerHTML,g;for(g in b)if(f.isStr(b[g]))var h=f.reg(g),d=d.replace(h,b[g]);a.innerHTML=d;a.innerHTML=a.innerHTML.replace(/\{\|\{\|/g,"{{").replace(/\|\}\|\}/g,"}}");k(".jstmpl-template-each",a).forEach(function(a){var d=a.innerHTML;a.innerHTML="\x3c!--  --\x3e";var c=d,h="",g=a.getAttribute("js-each"),e;for(e in b)e==g&&f.isArray(b[e])&&b[e].forEach(function(a){for(var b in a){var g=f.reg(b);c=c.replace(g,a[b])}h+=c;c=d});a.innerHTML=h;a.className=a.className.replace("jstmpl-template-each","")})}}))},component:function(a,c){a&&c&&f.isStr(a)&&f.isPlainObj(c)&&e("js-tmpl").forEach(function(b){b.innerHTML="";b.style.cssText="display:none !important";var d=c.template,f=c.data,g=c.event,h=b.getAttribute("type"),e=b.getAttribute("name"),r=b.getAttribute("data");if("component"==h&&e==a){var h="jstmpl-component-"+Date.now()+"-"+parseInt(1E17*Math.random()),l=d.substring(0,d.indexOf("\x3e")).toLowerCase().replace(/\s+(\=)/g,"\x3d").replace(/\s+(\')/g,"'").replace(/\s+(\")/g,'"'),n="",e="";0<l.indexOf("id")?(n=l.substring(l.indexOf("id")+4).replace(/(\'|\")(.*)/,""),""==n&&(d=d.replace(/id\=(\'\'|\"\")/,' id\x3d"'+h+'"'))):d=d.replace(l,l+' id\x3d"'+h+'"');e=""!=n?n:h;d=d.replace("\x3e",' js-data\x3d"'+r+'"\x3e');b.insertAdjacentHTML("afterend",d);var d={},p;for(p in f)d[p]=f[p];q.template("#"+e,d);m.getElementById(h)&&m.getElementById(h).removeAttribute("id");b=b.nextElementSibling;b.removeAttribute("js-data");k("[js-event]",b).forEach(function(a){var b=a.getAttribute("js-event");g&&g[b]&&g[b].apply(a)})}})},replace:function(a,c){a&&c&&f.isStr(a)&&f.isPlainObj(c)&&e("js-tmpl").forEach(function(b){b.innerHTML="";b.style.cssText="display:none !important";if("replace"==b.getAttribute("type")&&a==b.getAttribute("name")){var d=b.outerHTML.split(/(=|\s+)/).filter(function(a){return a&&!a.match(/(\<|\>|\=|\s+|\"|\')/)}),e=f.format(c.template),g="";d.forEach(function(a){a.match(/(name|type|style|none)/)||(e=g=e.replace(f.reg(a),b.getAttribute(a)))});b.outerHTML=g}})}};return q});
